{"version":3,"sources":["webpack:///./src/api/getUser.js","webpack:///./src/api/getData.js","webpack:///./src/views/role-list/components/filterPermission.js","webpack:///./src/views/role-list/components/Permission.vue","webpack:///./src/views/role-list/components/Permission.vue?2dda","webpack:///./src/views/role-list/index.vue","webpack:///./src/views/role-list/index.vue?7a6b"],"names":["getUserList","data","request","url","params","deleteUser","method","getAllUser","getUserDetail","getRolesList","feature","chapter","getPermission","filterPermission","rolePermission","permissionObj","menus","points","arr","forEach","item","item2","permissionMark","push","id","console","log","allPermission","ref","treeRef","onConfirm","closed","getAllpermission","value","checkedKeys","props","nextTick","setCheckedKeys","defaultProps","children","label","emits","__exports__","rolesList","distributePermissionVisible","getRoles","onPermissionClick","row","permission"],"mappings":"gHAAA,0LAEaA,EAAc,SAACC,GAC1B,OAAOC,eAAQ,CACbC,IAAK,iBACLC,OAAQH,KAICI,EAAa,SAACJ,GACzB,OAAOC,eAAQ,CACbC,IAAK,mBACLG,OAAQ,OACRL,UAISM,EAAa,WACxB,OAAOL,eAAQ,CACbC,IAAK,uBAGIK,EAAgB,SAACP,GAC5B,OAAOC,eAAQ,CACbI,OAAQ,OACRH,IAAK,sBACLF,UAGSQ,EAAe,WAC1B,OAAOP,eAAQ,CACbC,IAAK,sB,kCC/BT,sHAEaO,EAAU,WACrB,OAAOR,eAAQ,CACbC,IAAK,sBAGIQ,EAAU,WACrB,OAAOT,eAAQ,CACbC,IAAK,sBAGIS,EAAgB,WAC3B,OAAOV,eAAQ,CACbC,IAAK,6B,6HCdF,SAASU,EAAiBC,GAC/B,IAAMC,EACN,CACEC,MAAO,CACL,CACE,GAAM,IACN,eAAkB,OAClB,eAAkB,cAGpB,CACE,GAAM,IACN,eAAkB,OAClB,eAAkB,YAEpB,CACE,GAAM,IACN,eAAkB,OAClB,eAAkB,kBAEpB,CACE,GAAM,IACN,eAAkB,OAClB,eAAkB,kBAEpB,CACE,GAAM,IACN,eAAkB,OAClB,eAAkB,kBAGtBC,OAAQ,CACN,CACE,GAAM,MACN,eAAkB,OAClB,eAAkB,kBAEpB,CACE,GAAM,MACN,eAAkB,OAClB,eAAkB,cAEpB,CACE,GAAM,MACN,eAAkB,OAClB,eAAkB,cAEpB,CACE,GAAM,MACN,eAAkB,OAClB,eAAkB,0BAIpBC,EAAM,GAkBV,OAjBAJ,EAAeE,MAAMG,SAAQ,SAACC,GAC5BL,EAAcC,MAAMG,SAAQ,SAACE,GACvBD,IAASC,EAAMC,gBACjBJ,EAAIK,KAAKF,EAAMG,UAKrBV,EAAeG,OAAOE,SAAQ,SAACC,GAC7BL,EAAcE,OAAOE,SAAQ,SAACE,GACxBD,IAASC,EAAMC,gBACjBJ,EAAIK,KAAKF,EAAMG,UAKrBC,QAAQC,IAAIR,GACLA,E,yLC7BHS,EAAgBC,iBAAI,IACpBC,EAAUD,iBAAI,MAGdE,EAAS,yDAAG,8FAChBC,IADgB,2CAAH,qDAGTC,EAAgB,yDAAG,sHACApB,iBADA,gBACfX,EADe,EACfA,KACR0B,EAAcM,MAAQhC,EAFC,2CAAH,qDAItB+B,IAEA,IAAME,EAAcrB,EAAiBsB,EAAMrB,gBAE3CsB,uBAAS,WACPP,EAAQI,MAAMI,eAAeH,MAI/B,IAAMI,EAAe,CACnBC,SAAU,WACVC,MAAO,kBAIHT,EAAS,WACbU,EAAM,qBAAqB,I,mhCCnE7B,MAAMC,EAAc,EAEL,Q,kCCuCf,IAAMC,EAAYf,iBAAI,IAChBgB,EAA8BhB,kBAAI,GAClCd,EAAiBc,iBAAI,IACrBiB,EAAQ,yDAAG,sHACQpC,iBADR,gBACPR,EADO,EACPA,KACR0C,EAAUV,MAAQhC,EAAKA,KAFR,2CAAH,qDAIR6C,EAAoB,SAACC,GACzBH,EAA4BX,OAAQ,EACpCnB,EAAemB,MAAQc,EAAIC,WAC3BvB,QAAQC,IAAIqB,EAAIC,a,OAElBH,I,+lDCrDA,MAAM,EAAc,EAEL","file":"js/chunk-f8d1a6ee.7ab62151.js","sourcesContent":["import request from '@/utils/request'\r\n\r\nexport const getUserList = (data) => {\r\n  return request({\r\n    url: '/user/userList',\r\n    params: data\r\n  })\r\n}\r\n\r\nexport const deleteUser = (data) => {\r\n  return request({\r\n    url: '/user/deleteUser',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n\r\nexport const getAllUser = () => {\r\n  return request({\r\n    url: '/user/allUserList',\r\n  })\r\n}\r\nexport const getUserDetail = (data) => {\r\n  return request({\r\n    method: 'post',\r\n    url: '/user/getUserDetail',\r\n    data\r\n  })\r\n}\r\nexport const getRolesList = () => {\r\n  return request({\r\n    url: '/user/rolesList',\r\n\r\n  })\r\n}\r\n","import request from '@/utils/request'\r\n\r\nexport const feature = () => {\r\n  return request({\r\n    url: '/getData/feature'\r\n  })\r\n}\r\nexport const chapter = () => {\r\n  return request({\r\n    url: '/getData/chapter'\r\n  })\r\n}\r\nexport const getPermission = () => {\r\n  return request({\r\n    url: '/getData/allPermission'\r\n  })\r\n}","export function filterPermission(rolePermission) {\r\n  const permissionObj =\r\n  {\r\n    menus: [\r\n      {\r\n        \"id\": \"1\",\r\n        \"permissionName\": \"员工管理\",\r\n        \"permissionMark\": \"userManage\",\r\n\r\n      },\r\n      {\r\n        \"id\": \"2\",\r\n        \"permissionName\": \"角色列表\",\r\n        \"permissionMark\": \"roleList\",\r\n      },\r\n      {\r\n        \"id\": \"3\",\r\n        \"permissionName\": \"权限列表\",\r\n        \"permissionMark\": \"permissionList\",\r\n      },\r\n      {\r\n        \"id\": \"4\",\r\n        \"permissionName\": \"文章排名\",\r\n        \"permissionMark\": \"articleRanking\",\r\n      },\r\n      {\r\n        \"id\": \"5\",\r\n        \"permissionName\": \"创建文章\",\r\n        \"permissionMark\": \"articleCreate\",\r\n      }\r\n    ],\r\n    points: [\r\n      {\r\n        \"id\": \"1-1\",\r\n        \"permissionName\": \"分配角色\",\r\n        \"permissionMark\": \"distributeRole\",\r\n      },\r\n      {\r\n        \"id\": \"1-2\",\r\n        \"permissionName\": \"导入员工\",\r\n        \"permissionMark\": \"importUser\",\r\n      },\r\n      {\r\n        \"id\": \"1-3\",\r\n        \"permissionName\": \"删除员工\",\r\n        \"permissionMark\": \"removeUser\",\r\n      },\r\n      {\r\n        \"id\": \"2-1\",\r\n        \"permissionName\": \"分配权限\",\r\n        \"permissionMark\": \"distributePermission\",\r\n      },\r\n    ]\r\n  }\r\n  let arr = []\r\n  rolePermission.menus.forEach((item) => {\r\n    permissionObj.menus.forEach((item2) => {\r\n      if (item === item2.permissionMark) {\r\n        arr.push(item2.id)\r\n      }\r\n\r\n    })\r\n  })\r\n  rolePermission.points.forEach((item) => {\r\n    permissionObj.points.forEach((item2) => {\r\n      if (item === item2.permissionMark) {\r\n        arr.push(item2.id)\r\n      }\r\n\r\n    })\r\n  })\r\n  console.log(arr);\r\n  return arr\r\n}","<template>\r\n  <el-dialog\r\n    :title=\"$t('msg.excel.roleDialogTitle')\"\r\n    :model-value=\"modelValue\"\r\n    @close=\"closed\"\r\n  >\r\n    <el-tree\r\n      ref=\"treeRef\"\r\n      :data=\"allPermission\"\r\n      show-checkbox\r\n      check-strictly\r\n      node-key=\"id\"\r\n      default-expand-all\r\n      :props=\"defaultProps\"\r\n    >\r\n    </el-tree>\r\n\r\n    <template #footer>\r\n      <span class=\"dialog-footer\">\r\n        <el-button @click=\"closed\">{{ $t('msg.universal.cancel') }}</el-button>\r\n        <el-button type=\"primary\" @click=\"onConfirm\">{{\r\n          $t('msg.universal.confirm')\r\n        }}</el-button>\r\n      </span>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script setup>\r\nimport { nextTick, ref } from 'vue'\r\nimport { getPermission } from '@/api/getData'\r\nimport { filterPermission } from './filterPermission'\r\nconst props = defineProps({\r\n  modelValue: {\r\n    type: Boolean,\r\n    required: true\r\n  },\r\n  rolePermission: {\r\n    type: Object,\r\n    required: true\r\n  }\r\n})\r\nconst emits = defineEmits(['update:modelValue'])\r\nconst allPermission = ref([])\r\nconst treeRef = ref(null)\r\n//确定按钮点击事件\r\n\r\nconst onConfirm = async () => {\r\n  closed()\r\n}\r\nconst getAllpermission = async () => {\r\n  const { data } = await getPermission()\r\n  allPermission.value = data\r\n}\r\ngetAllpermission()\r\n\r\nconst checkedKeys = filterPermission(props.rolePermission)\r\n\r\nnextTick(() => {\r\n  treeRef.value.setCheckedKeys(checkedKeys)\r\n})\r\n\r\n// 属性结构配置\r\nconst defaultProps = {\r\n  children: 'children',\r\n  label: 'permissionName'\r\n}\r\n\r\n// 关闭\r\nconst closed = () => {\r\n  emits('update:modelValue', false)\r\n}\r\n</script>\r\n","import script from \"./Permission.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Permission.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\n  <div class=\"\">\n    <el-card>\n      <el-table\n        :data=\"rolesList\"\n        border\n        style=\"width: 100%\"\n        table-layout=\"auto\"\n      >\n        <el-table-column :label=\"$t('msg.role.index')\" type=\"index\" width=\"120\">\n        </el-table-column>\n        <el-table-column :label=\"$t('msg.role.name')\" prop=\"title\">\n        </el-table-column>\n        <el-table-column :label=\"$t('msg.role.desc')\" prop=\"des\">\n        </el-table-column>\n        <el-table-column\n          :label=\"$t('msg.role.action')\"\n          prop=\"action\"\n          width=\"260\"\n          #default=\"{ row }\"\n        >\n          <el-button\n            type=\"primary\"\n            size=\"small\"\n            @click=\"onPermissionClick(row)\"\n            v-permission=\"['distributePermission']\"\n          >\n            {{ $t('msg.role.assignPermissions') }}\n          </el-button>\n        </el-table-column>\n      </el-table>\n    </el-card>\n    <Permission\n      v-model=\"distributePermissionVisible\"\n      :rolePermission=\"rolePermission\"\n      v-if=\"distributePermissionVisible\"\n    ></Permission>\n  </div>\n</template>\n\n<script setup>\nimport { getRolesList } from '@/api/getUser'\nimport Permission from './components/Permission.vue'\nimport { ref } from 'vue'\nconst rolesList = ref([])\nconst distributePermissionVisible = ref(false)\nconst rolePermission = ref({})\nconst getRoles = async () => {\n  const { data } = await getRolesList()\n  rolesList.value = data.data\n}\nconst onPermissionClick = (row) => {\n  distributePermissionVisible.value = true\n  rolePermission.value = row.permission\n  console.log(row.permission)\n}\ngetRoles()\n</script>\n\n<style lang=\"scss\" scoped></style>\n","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"sourceRoot":""}